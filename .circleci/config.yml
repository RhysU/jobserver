# See https://circleci.com/docs/2.0/sample-config/
version: 2.1

# Define an executor parametrized by the Python version
executors:
    python-docker:
        parameters:
            version:
                description: "Python version"
                type: "string"
        docker:
          - image: cimg/python:<<parameters.version>>

# Define the jobs we want to run for this project
jobs:
    test:
        parameters:
            version:
                description: "Python version"
                type: "string"
        executor:
            name: python-docker
            version: <<parameters.version>>
    steps:
      - checkout
      - run: ./ci

# Orchestrate our job run sequence
workflows:
    matrix-tests:
        jobs:
            - test
              matrix:
                  parameters:
                      version:
                          - 3.6
                          - 3.7
                          - 3.8
                          - 3.9
                          - 3.10
